<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no,viewport-fit=cover"
  />
  <script src="https://unpkg.com/vue@next"></script>
  <script src="./previewer/index.umd.js"></script>
  <link rel="stylesheet" href="./previewer/index.css">
  <style>
      html, body {
          height: 100%;
      }

      body {
          display: flex;
      }

      #app {
          flex: 1;
      }

      * {
          margin: 0;
          padding: 0;
      }
  </style>
  <title>Title</title>
  <script>
    //设置根节点font-size
    (function(doc, win) {
      var docEl = doc.documentElement,
        resizeEvt = "orientationchange" in window ? "orientationchange" : "resize",
        recalc = function() {
          var rem = docEl.clientWidth / 10;
          if (!rem) return;
          docEl.style.fontSize = rem + "px";
        };
      recalc();
      if (!doc.addEventListener) return;
      win.addEventListener(resizeEvt, recalc, false); //窗体大小发生改变时
      doc.addEventListener("DOMContentLoaded", recalc, false);//文档重载时
    })(document, window);
  </script>
</head>
<body>
<div id="app">
  <previewer :rem="true" :pages="page" />
</div>
</body>
<script>
  const { ref } = Vue;
  const app = Vue.createApp({
    setup() {
      const page = ref([]);
      fetch("http://192.168.0.110:3000/api/document/QgT3f07Fvqs97q4O").then(res => res.json()).then(res => {
        if (res.code === 200) {
          const { content, name } = res.data;
          document.title = name;
          page.value = content;

        }
      });
      return {
        page:
          [{
            "order": 0,
            "components": [
              {
                "type": "HContainer",
                "id": "root",
                "width": 375,
                "height": "",
                "position": "relative",
                "lock": false,
                "borderRadius": "0,0,0,0",
                "borderStyle": "solid",
                "background": {
                  "color": "",
                  "img": ""
                },
                "isRoot": true,
                "isContainer": true,
                "children": [
                  {
                    "type": "HImg",
                    "id": "664f16a0-2c61-4b2f-a7f7-9be330a8d5fd",
                    "width": 375,
                    "height": 180,
                    "position": "static",
                    "lock": false,
                    "borderRadius": "0,0,0,0",
                    "borderStyle": "solid",
                    "background": {
                      "color": "",
                      "img": ""
                    },
                    "objectFit": "cover",
                    "src": "https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpic1.win4000.com%2Fwallpaper%2F2018-01-09%2F5a54397bf0512.jpg%3Fdown&refer=http%3A%2F%2Fpic1.win4000.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1642234674&t=38100f2faabb0ecc91c226718de13632",
                    "parentId": "root",
                    "top": 0,
                    "left": 0
                  }
                ],
                "JustifyContent": "flex-start",
                "AlignItems": "stretch",
                "display": "block",
                "color": "#000",
                "fontFamily": "'PingFang SC', 'STHeitiSC-Light', 'Helvetica-Light', arial,  sans-serif, 'Droid Sans Fallback'",
                "fontSize": 14,
                "fontStyle": "normal",
                "fontWeight": "normal",
                "textAlign": "left"
              }
            ],
            "id": "a31bcdab-9afd-4346-8d0b-59300a0a7b7e",
            "name": "页面1"
          }]
      };
    }
  });
  app.use(previewer);
  app.mount("#app");
</script>
</html>
