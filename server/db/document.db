{"name":"Demo","content":{"pages":[{"order":0,"components":[{"type":"HContainer","id":"root","width":375,"height":"","position":"relative","lock":false,"borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"isRoot":true,"isContainer":true,"children":[{"type":"HImg","id":"0d555025-477d-466c-82d8-cb524f40d1fb","width":"","height":160,"position":"static","lock":false,"borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"objectFit":"cover","src":"https://image-static.segmentfault.com/253/734/2537345484-61cbc77f61dd2_cover","parentId":"root"},{"type":"HContainer","id":"7311a449-670e-4843-b395-6494c057a5d4","width":"","height":"","position":"static","lock":false,"borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"isContainer":true,"children":[{"type":"HText","id":"e14bd8d7-ff0b-4942-95b0-ba7de4f7457e","width":"","height":"","position":"static","lock":false,"borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"text":"Web前端主题切换的几种方案","color":"","lineHeight":"","fontFamily":"DINAlternate-Bold, DINAlternate;","textAlign":"center","fontStyle":"","fontWeight":"500","overflow":false,"fontSize":22,"maxLines":1,"parentId":"root","margin":{"bottom":16}},{"type":"HContainer","id":"033cde4d-b853-4f67-8ea7-dc7f80c1564f","width":"","height":21,"position":"static","lock":false,"borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"isContainer":true,"children":[{"type":"HContainer","id":"d5dd80cb-b7ca-4029-8df5-0280389aa549","width":200,"height":"","position":"static","lock":false,"borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"isContainer":true,"children":[{"type":"HText","id":"08ed5d88-4533-4307-a819-bef548a6468f","width":57,"height":14,"position":"static","lock":false,"borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"text":"Dickens","color":"rgba(0, 150, 84, 1)","lineHeight":"","fontFamily":"","textAlign":"","fontStyle":"","fontWeight":"700","overflow":false,"fontSize":14,"maxLines":1,"parentId":"d5dd80cb-b7ca-4029-8df5-0280389aa549","top":0,"left":0},{"type":"HText","id":"966a3c33-c3d4-4cd1-b707-3c1ad06ff3ec","width":"","height":"","position":"static","lock":false,"borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"text":"发布于 12 月 29 日","color":"rgba(108, 117, 125, 1)","lineHeight":"","fontFamily":"","textAlign":"","fontStyle":"","fontWeight":"","overflow":false,"fontSize":14,"maxLines":1,"parentId":"d5dd80cb-b7ca-4029-8df5-0280389aa549","margin":{"left":12}}],"JustifyContent":"flex-start","AlignItems":"stretch","display":"flex","color":"#000","fontFamily":"'PingFang SC', 'STHeitiSC-Light', 'Helvetica-Light', arial,  sans-serif, 'Droid Sans Fallback'","fontSize":14,"fontStyle":"normal","fontWeight":"normal","textAlign":"left","parentId":"033cde4d-b853-4f67-8ea7-dc7f80c1564f"},{"type":"HText","id":"70ef3e7c-f122-45e3-aaf4-0c3fed1f2fa8","width":"","height":"","position":"static","lock":false,"borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"text":"English","color":"rgba(0, 150, 94, 1)","lineHeight":"","fontFamily":"","textAlign":"","fontStyle":"","fontWeight":"","overflow":false,"fontSize":14,"maxLines":1,"parentId":"033cde4d-b853-4f67-8ea7-dc7f80c1564f"}],"JustifyContent":"space-between","AlignItems":"center","display":"flex","color":"#000","fontFamily":"'PingFang SC', 'STHeitiSC-Light', 'Helvetica-Light', arial,  sans-serif, 'Droid Sans Fallback'","fontSize":14,"fontStyle":"normal","fontWeight":"normal","textAlign":"left","parentId":"7311a449-670e-4843-b395-6494c057a5d4","margin":{"bottom":24}},{"type":"HContainer","id":"70dddcf1-c4cf-4351-8cbf-3e3cae3a9d1e","width":343,"height":22,"position":"static","lock":false,"borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"isContainer":true,"children":[{"type":"HText","id":"045deab5-eb68-4243-9ec7-1cdeaecf02ff","width":154,"height":"","position":"static","lock":false,"borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"text":"欢迎关注我的公众号","color":"","lineHeight":"","fontFamily":"","textAlign":"","fontStyle":"","fontWeight":"","overflow":false,"fontSize":"","maxLines":1,"parentId":"7311a449-670e-4843-b395-6494c057a5d4","top":0,"left":0},{"type":"HText","id":"6833df45-8133-4986-9045-fd6ec20fb74a","width":47,"height":"","position":"static","lock":false,"borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"text":"睿Talk","color":"rgba(214, 51, 132, 1)","lineHeight":"","fontFamily":"","textAlign":"","fontStyle":"","fontWeight":"400","overflow":false,"fontSize":14,"maxLines":1,"parentId":"70dddcf1-c4cf-4351-8cbf-3e3cae3a9d1e","top":0,"left":0},{"type":"HText","id":"a32a7ee0-0005-4b2f-9986-f8ea6c18d32d","width":"","height":"","position":"static","lock":false,"borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"text":"获取我最新的文章","color":"","lineHeight":"","fontFamily":"","textAlign":"","fontStyle":"","fontWeight":"","overflow":false,"fontSize":"","maxLines":1,"parentId":"70dddcf1-c4cf-4351-8cbf-3e3cae3a9d1e"}],"JustifyContent":"flex-start","AlignItems":"stretch","display":"flex","color":"#000","fontFamily":"'PingFang SC', 'STHeitiSC-Light', 'Helvetica-Light', arial,  sans-serif, 'Droid Sans Fallback'","fontSize":16,"fontStyle":"normal","fontWeight":"normal","textAlign":"left","parentId":"7311a449-670e-4843-b395-6494c057a5d4","top":0,"left":0},{"type":"HImg","id":"40fccbcf-a84b-437d-a637-38a5c7483199","width":"","height":100,"position":"static","lock":false,"borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"objectFit":"cover","src":"https://image-static.segmentfault.com/154/067/1540671992-5c359fffcb756_fix732","parentId":"7311a449-670e-4843-b395-6494c057a5d4","margin":{"bottom":20}},{"type":"HText","id":"2d456430-f7b3-4777-921e-661e6f7a5e48","width":"","height":"","position":"static","lock":false,"borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"text":"一、前言","color":"","lineHeight":"","fontFamily":"","textAlign":"","fontStyle":"","fontWeight":"500","overflow":false,"fontSize":24,"maxLines":1,"parentId":"7311a449-670e-4843-b395-6494c057a5d4","margin":{"bottom":""}},{"type":"HText","id":"059d686b-e46a-4bd7-ad6c-e6083ca4ba6c","width":"","height":"","position":"static","lock":false,"borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"text":"本文将介绍 Web 前端主题切换的几种常用方案，示例代码基于 React 框架。废话少说，show you the code！","color":"","lineHeight":"25.6","fontFamily":"","textAlign":"","fontStyle":"","fontWeight":"400","overflow":false,"fontSize":15,"maxLines":1,"parentId":"7311a449-670e-4843-b395-6494c057a5d4","margin":{"top":16,"bottom":20}},{"type":"HText","id":"63e4adec-3bf7-445b-bff5-df3e58117622","width":"","height":"","position":"static","lock":false,"alias":"段落标题","borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"text":"二、场景一：预定义主题","color":"","lineHeight":"","fontFamily":"","textAlign":"","fontStyle":"","fontWeight":"500","overflow":false,"fontSize":24,"maxLines":1,"parentId":"7311a449-670e-4843-b395-6494c057a5d4"},{"type":"HText","id":"011c9cdb-eef1-4905-a3af-71fad518f29e","width":"","height":"","position":"static","lock":false,"alias":"段落内容","borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"text":"这种场景比较常见的情况是预定义浅色和深色 2 个主题，可以有 2 种实现方案。","color":"","lineHeight":"25.6","fontFamily":"","textAlign":"","fontStyle":"","fontWeight":"400","overflow":false,"fontSize":15,"maxLines":1,"parentId":"7311a449-670e-4843-b395-6494c057a5d4","margin":{"top":16,"bottom":20}},{"type":"HText","id":"370bf476-39d4-4a90-8ca6-dbd3096f6cb3","width":"","height":"","position":"static","lock":false,"alias":"段落标题","borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"text":"方案1：CSS 属性覆盖","color":"rgba(33, 37, 41, 1)","lineHeight":"","fontFamily":"","textAlign":"","fontStyle":"","fontWeight":"500","overflow":false,"fontSize":20,"maxLines":1,"parentId":"7311a449-670e-4843-b395-6494c057a5d4","margin":{"bottom":16}},{"type":"HText","id":"595a11f8-f0ed-4df2-8fc3-492dbca1625f","width":"","height":"","position":"static","lock":false,"alias":"段落内容","borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"text":"这种方案利用了css多层样式精确匹配的特点，通过样式覆盖的方式实现主题的切换。首先需要在应用的根元素中设一个 class，切换主题时给  赋上对应的值，下面以theme1/theme2为例。","color":"","lineHeight":"25.6","fontFamily":"","textAlign":"","fontStyle":"","fontWeight":"400","overflow":false,"fontSize":15,"maxLines":1,"parentId":"7311a449-670e-4843-b395-6494c057a5d4","margin":{"top":16,"bottom":20}},{"type":"HText","id":"14d16cac-ac2e-4712-b588-314e0c732579","width":"","height":"","position":"static","lock":false,"alias":"二级标题","borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"text":"方案2：css变量替换","color":"rgba(33, 37, 41, 1)","lineHeight":"","fontFamily":"","textAlign":"","fontStyle":"","fontWeight":"500","overflow":false,"fontSize":20,"maxLines":1,"parentId":"7311a449-670e-4843-b395-6494c057a5d4","margin":{"bottom":16}},{"type":"HText","id":"864cc988-df1d-4ec8-8c4a-a41d9f424dd6","width":"","height":"","position":"static","lock":false,"alias":"段落内容","borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"text":"这个方案跟方案一的思路是相似的，区别是使用了 css变量 来定义主题色。\n首先要在页面的根元素上定义一个 dataset: <html lang=\"en\" data-theme=\"theme1\">。\n然后定义不同主题的变量值：","color":"","lineHeight":"25.6","fontFamily":"","textAlign":"","fontStyle":"","fontWeight":"400","overflow":false,"fontSize":15,"maxLines":1,"parentId":"7311a449-670e-4843-b395-6494c057a5d4","margin":{"top":16,"bottom":20}},{"type":"HText","id":"89dbdd03-cf8a-4a2a-acbc-06bfe1670b70","width":"","height":"","position":"static","lock":false,"alias":"一级标题","borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"text":"三、场景二：允许用户自定义主题","color":"","lineHeight":"","fontFamily":"","textAlign":"","fontStyle":"","fontWeight":"500","overflow":false,"fontSize":24,"maxLines":1,"parentId":"7311a449-670e-4843-b395-6494c057a5d4"},{"type":"HText","id":"b2bf18b2-2fde-42cd-887f-a6bcd8c2d557","width":"","height":"","position":"static","lock":false,"alias":"段落内容","borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"text":"这种场景与场景一的最大区别是无法预定义 CSS 属性和变量，一般是要搭配接口来实现动态替换的功能。下面的例子只演示原理，忽略接口数据的处理。\n\n","color":"","lineHeight":"25.6","fontFamily":"","textAlign":"","fontStyle":"","fontWeight":"400","overflow":false,"fontSize":15,"maxLines":1,"parentId":"7311a449-670e-4843-b395-6494c057a5d4","margin":{"top":16,"bottom":20}},{"type":"HText","id":"4fc06cef-e818-4a40-a3ff-3e63ff2434c2","width":"","height":"","position":"static","lock":false,"alias":"二级标题","borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"text":"方案1：全量替换CSS","color":"rgba(33, 37, 41, 1)","lineHeight":"","fontFamily":"","textAlign":"","fontStyle":"","fontWeight":"500","overflow":false,"fontSize":20,"maxLines":1,"parentId":"7311a449-670e-4843-b395-6494c057a5d4","margin":{"bottom":16}},{"type":"HText","id":"eecc6b9f-b249-4bdb-ad6a-6346721fb135","width":"","height":"","position":"static","lock":false,"alias":"段落内容","borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"text":"这个方案比较简单粗暴，需要将页面的所有 css 打包在一起，放在预定义好 ID 的 style 标签中，切换主题的时候将 css 全量替换掉。","color":"","lineHeight":"25.6","fontFamily":"","textAlign":"","fontStyle":"","fontWeight":"400","overflow":false,"fontSize":15,"maxLines":1,"parentId":"7311a449-670e-4843-b395-6494c057a5d4","margin":{"top":16,"bottom":20}},{"type":"HText","id":"57aedc2c-7257-44e2-8634-9cb7f4a255bd","width":"","height":"","position":"static","lock":false,"alias":"二级标题","borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"text":"方案2：替换CSS变量","color":"rgba(33, 37, 41, 1)","lineHeight":"","fontFamily":"","textAlign":"","fontStyle":"","fontWeight":"500","overflow":false,"fontSize":20,"maxLines":1,"parentId":"7311a449-670e-4843-b395-6494c057a5d4","margin":{"bottom":16}},{"type":"HText","id":"19a430ad-300d-427b-ae1d-caed8ebb3e6a","width":"","height":"","position":"static","lock":false,"alias":"段落内容","borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"text":"方案一比较简单粗暴，数据量也比较大。可以使用 css变量 来进行优化，抽取主题色变量，放在根伪类下面。切换主题时只需要动态设置 style 标签内 css 变量的值。","color":"","lineHeight":"25.6","fontFamily":"","textAlign":"","fontStyle":"","fontWeight":"400","overflow":false,"fontSize":15,"maxLines":1,"parentId":"7311a449-670e-4843-b395-6494c057a5d4","margin":{"top":16,"bottom":20}},{"type":"HText","id":"09001ed1-c746-421f-a7ae-bad120bee9d3","width":"","height":"","position":"static","lock":false,"alias":"一级标题","borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"text":"四、总结","color":"","lineHeight":"","fontFamily":"","textAlign":"","fontStyle":"","fontWeight":"500","overflow":false,"fontSize":24,"maxLines":1,"parentId":"7311a449-670e-4843-b395-6494c057a5d4"},{"type":"HText","id":"f0bfde52-68ea-49ac-82eb-c3721e770cdb","width":"","height":"","position":"static","lock":false,"alias":"段落内容","borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"text":"本文介绍了 4 种常用的主题切换方案，当中最后一个方案最灵活，可以配合 API 扩展无限量的主题。对于更常见的浅色加深色主题模式，可以选择第 2 种方案。他们的共同点都是使用了 css 变量抽取主题颜色，实现起来非常优雅。","color":"","lineHeight":"25.6","fontFamily":"","textAlign":"","fontStyle":"","fontWeight":"400","overflow":false,"fontSize":15,"maxLines":1,"parentId":"7311a449-670e-4843-b395-6494c057a5d4","margin":{"top":16,"bottom":20}}],"JustifyContent":"flex-start","AlignItems":"stretch","display":"block","color":"#000","fontFamily":"'PingFang SC', 'STHeitiSC-Light', 'Helvetica-Light', arial,  sans-serif, 'Droid Sans Fallback'","fontSize":14,"fontStyle":"normal","fontWeight":"normal","textAlign":"left","parentId":"root","padding":{"top":16,"left":16,"right":16}}],"JustifyContent":"flex-start","AlignItems":"stretch","display":"block","color":"#000","fontFamily":"'PingFang SC', 'STHeitiSC-Light', 'Helvetica-Light', arial,  sans-serif, 'Droid Sans Fallback'","fontSize":14,"fontStyle":"normal","fontWeight":"normal","textAlign":"left"}],"id":"134fab3c-c478-46e0-9e02-4461fa7537da","name":"页面1"}],"extractComponents":[{"name":"一级标题","payload":{"type":"HText","id":"2d456430-f7b3-4777-921e-661e6f7a5e48","width":"","height":"","position":"static","lock":false,"borderRadius":"0,0,0,0","borderStyle":"solid","background":{"color":"","img":""},"text":"一、前言","color":"","lineHeight":"","fontFamily":"","textAlign":"","fontStyle":"","fontWeight":"500","overflow":false,"fontSize":24,"maxLines":1,"parentId":"7311a449-670e-4843-b395-6494c057a5d4","margin":{"bottom":""},"alias":"一级标题"}}]},"cover":"/static/covers/6c97iDoYA09pPwDP.png","_id":"6c97iDoYA09pPwDP","createdAt":{"$$date":1640852668127},"updatedAt":{"$$date":1640856693706}}
